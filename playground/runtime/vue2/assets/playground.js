import{A as h}from"./resetcss.e39ac995.js";import{d as w,f as m,c as E,p as y,w as A,o as C,h as g,j as f,r as P,n as x}from"./vueComponentNormalizer.252e4aba.js";const $="modulepreload",v={},I="/tmagic-editor/playground/runtime/vue2/",S=function(u,n){return!n||n.length===0?u():Promise.all(n.map(i=>{if(i=`${I}${i}`,i in v)return;v[i]=!0;const s=i.endsWith(".css"),c=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${c}`))return;const e=document.createElement("link");if(e.rel=s?"stylesheet":$,s||(e.as="script",e.crossOrigin=""),e.href=i,document.head.appendChild(e),s)return new Promise((r,o)=>{e.addEventListener("load",r),e.addEventListener("error",()=>o(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>u())};var R=w({setup(){const t=m(),u=m(),n=m(),i=E(()=>{var c,e,r,o;return((e=(c=t.value)==null?void 0:c.items)==null?void 0:e.find(a=>a.id===u.value))||((o=(r=t.value)==null?void 0:r.items)==null?void 0:o[0])}),s=new h({config:t.value,platform:"editor"});return y("app",s),A(i,async()=>{await g();const c=document.querySelector(".magic-ui-page");c&&window.magic.onPageElUpdate(c)}),C(()=>{var c;(c=window.magic)==null||c.onRuntimeReady({getApp(){return s},updateRootConfig(e){console.log("update config",e),t.value=e,s==null||s.setConfig(e,u.value)},updatePageId(e){console.log("update page id",e),u.value=e,s==null||s.setPage(e)},getSnapElements(){return Array.from(document.querySelectorAll("[class*=magic-ui][id]"))},select(e){console.log("select config",e),n.value=e;const r=document.getElementById(`${e}`);return r||g().then(()=>document.getElementById(`${e}`))},add({config:e}){var l;if(console.log("add config",e),!t.value)throw new Error("error");if(!n.value)throw new Error("error");const r=f(n.value,[t.value]),o=r.pop(),a=o!=null&&o.items?o:r.pop();if(!a)throw new Error("\u672A\u627E\u5230\u7236\u8282\u70B9");(l=a.items)==null||l.push(e)},update({config:e}){var p;if(console.log("update config",e),!t.value)throw new Error("error");const r=f(e.id,[t.value]),o=r.pop(),a=r.pop();if(!o)throw new Error("\u672A\u627E\u5230\u76EE\u6807\u8282\u70B9");if(!a)throw new Error("\u672A\u627E\u5230\u7236\u8282\u70B9");const l=(p=a.items)==null?void 0:p.findIndex(d=>d.id===o.id);a.items.splice(l,1,P(e))},remove({id:e}){var p;if(!t.value)throw new Error("error");const r=f(e,[t.value]),o=r.pop();if(!o)throw new Error("\u672A\u627E\u5230\u76EE\u6807\u5143\u7D20");const a=r.pop();if(!a)throw new Error("\u672A\u627E\u5230\u7236\u5143\u7D20");const l=(p=a.items)==null?void 0:p.findIndex(d=>d.id===o.id);a.items.splice(l,1)}})}),{pageConfig:i}}}),j=function(){var t=this,u=t.$createElement,n=t._self._c||u;return t.pageConfig?n("magic-ui-page",{attrs:{config:t.pageConfig}}):t._e()},B=[];const _={};var k=x(R,j,B,!1,O,null,null,null);function O(t){for(let u in _)this[u]=_[u]}var V=function(){return k.exports}();const b="/tmagic-editor/playground/runtime/vue2/assets/components.js";S(()=>import(b),[]).then(()=>{const{components:t,plugins:u}=window.magicPresetComponents;Object.values(t).forEach(n=>{Vue.component(n.name,n)}),Object.values(u).forEach(n=>{Vue.use(n)}),new Vue({render:n=>n(V),el:"#app"})});
